<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Murdered.</title>
<style>
    body {
        margin: 0;
        background: radial-gradient(circle at center, #111 0%, #050505 100%);
        color: #eaeaea;
        font-family: "Georgia", serif;
        overflow-x: hidden;
    }

    section {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 2rem;
    }

    h1 {
        font-size: 4.5rem;
        font-weight: normal;
        letter-spacing: 0.15em;
        opacity: 0;
        animation: fadeInTitle 4s ease forwards;
    }

    @keyframes fadeInTitle {
        to { opacity: 1; }
    }

    .fade-in {
        opacity: 0;
        transition: opacity 3s ease;
    }

    .visible {
        opacity: 1;
    }

    p {
        max-width: 750px;
        font-size: 1.25rem;
        line-height: 1.8;
    }

    .question {
        color: #aa0000;
        font-size: 2.1rem;
        margin-top: 2rem;
        font-weight: bold;
        opacity: 0;
    }

    .glitch {
        animation: flicker 0.15s infinite alternate,
                   glitchShift 0.2s infinite alternate;
    }

    @keyframes flicker {
        from { opacity: 0.5; }
        to { opacity: 1; }
    }

    @keyframes glitchShift {
        0% { text-shadow: 2px 0 red, -2px 0 black; transform: translateX(0); }
        50% { text-shadow: -2px 0 red, 2px 0 black; transform: translateX(2px); }
        100% { text-shadow: 2px 0 red, -2px 0 black; transform: translateX(-2px); }
    }

    /* Knife styling */
    .knife-container {
        margin-top: 5rem;
        opacity: 0;
        transition: opacity 3s ease;
    }

    .knife-visible {
        opacity: 1;
    }

    .knife {
        width: 80px;
        animation: sway 6s ease-in-out infinite;
        filter: drop-shadow(0 0 6px rgba(255,255,255,0.1));
    }

    @keyframes sway {
        0% { transform: rotate(-2deg); }
        50% { transform: rotate(2deg); }
        100% { transform: rotate(-2deg); }
    }
</style>
</head>
<body>

<section>
    <h1>Murdered.</h1>
</section>

<section>
    <div>
        <p class="fade-in" id="story">
            I was sitting alone, tiny lamp illuminating the desk in front of me.
            A text from my phone lights up my features,
            I read it and ponder upon the words written upon the screen.
        </p>

        <p class="question" id="question">
            If you were to be murdered, how would you like to go?
        </p>

        <div class="knife-container" id="knifeContainer">
            <!-- Simple SVG knife -->
            <svg class="knife" viewBox="0 0 100 300">
                <!-- Blade -->
                <path d="M50 10 L65 200 L35 200 Z"
                      fill="silver" stroke="#ccc" stroke-width="2"/>
                <!-- Handle -->
                <rect x="40" y="200" width="20" height="80"
                      fill="#222"/>
            </svg>
        </div>

    </div>
</section>

<script>
    const story = document.getElementById("story");
    const question = document.getElementById("question");
    const knifeContainer = document.getElementById("knifeContainer");

    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                story.classList.add("visible");

                setTimeout(() => {
                    question.style.opacity = "1";
                    question.classList.add("glitch");
                    startHeartbeat();
                }, 5000);

                observer.disconnect();
            }
        });
    }, { threshold: 0.6 });

    observer.observe(story);

    // Knife appears on further scroll
    const knifeObserver = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                knifeContainer.classList.add("knife-visible");
            }
        });
    }, { threshold: 0.5 });

    knifeObserver.observe(knifeContainer);

    // Heartbeat
    let heartbeatStarted = false;

    function startHeartbeat() {
        if (heartbeatStarted) return;
        heartbeatStarted = true;

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function beat() {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();

            osc.type = "sine";
            osc.frequency.setValueAtTime(80, audioCtx.currentTime);

            gain.gain.setValueAtTime(1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.15);

            osc.connect(gain);
            gain.connect(audioCtx.destination);

            osc.start();
            osc.stop(audioCtx.currentTime + 0.15);
        }

        setInterval(() => {
            beat();
            setTimeout(beat, 250);
        }, 1200);
    }
</script>

</body>
</html>
